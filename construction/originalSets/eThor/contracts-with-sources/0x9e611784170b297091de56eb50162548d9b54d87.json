{"SourceCode":"pragma solidity ^0.4.8;\r\n\r\ncontract Crowdsale {\r\n\tfunction invest(address receiver) payable{}\r\n}\r\n/**\r\n*\tThis contract accepts investments, which can be sent to the specified ICO contract buy calling buyTokens().\r\n*\tFunds can be withdrawn anytime as long as the tokens have not yet been purchased.\r\n*\tAuthor: Julia Altenried\r\n**/\r\ncontract Investment{\r\n\tCrowdsale public ico;\r\n\taddress[] public investors;\r\n\tmapping(address => uint) public balanceOf;\r\n\r\n\r\n\t/** constructs an investment contract for an ICO contract **/\r\n\tfunction Investment(){\r\n\t\tico = Crowdsale(0x7be89db09b0c1023fd0407b24b98810ae97f61c1);\r\n\t}\r\n\r\n\t/** make an investment **/\r\n\tfunction() payable{\r\n\t\tif(!isInvestor(msg.sender)){\r\n\t\t\tinvestors.push(msg.sender);\r\n\t\t}\r\n\t\tbalanceOf[msg.sender] += msg.value;\r\n\t}\r\n\r\n\t/** checks if the address invested **/\r\n\tfunction isInvestor(address who) returns (bool){\r\n\t\tfor(uint i = 0; i< investors.length; i++)\r\n\t\t\tif(investors[i] == who)\r\n\t\t\t\treturn true;\r\n\t\treturn false;\r\n\t}\r\n\r\n\t/** buys token in behalf of the investors **/\r\n\tfunction buyTokens(uint from, uint to){\r\n\t\tuint amount;\r\n\t\tif(to>investors.length)\r\n\t\t\tto = investors.length;\r\n\t\tfor(uint i = from; i < to; i++){\r\n\t\t\tif(balanceOf[investors[i]]>0){\r\n\t\t\t\tamount = balanceOf[investors[i]];\r\n\t\t\t\tdelete balanceOf[investors[i]];\r\n\t\t\t\tico.invest.value(amount)(investors[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/** In case an investor wants to retrieve his or her funds (only possible before tokens are bought). **/\r\n\tfunction withdraw(){\r\n\t\tmsg.sender.send(balanceOf[msg.sender]);\r\n\t}\r\n\r\n\t/** returns the number of investors**/\r\n\tfunction getNumInvestors() constant returns(uint){\r\n\t\treturn investors.length;\r\n\t}\r\n\r\n}","ABI":"[{\"constant\":false,\"inputs\":[],\"name\":\"withdraw\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"investors\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"ico\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"balanceOf\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getNumInvestors\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"from\",\"type\":\"uint256\"},{\"name\":\"to\",\"type\":\"uint256\"}],\"name\":\"buyTokens\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"who\",\"type\":\"address\"}],\"name\":\"isInvestor\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"type\":\"constructor\"},{\"payable\":true,\"type\":\"fallback\"}]","ContractName":"Investment","CompilerVersion":"v0.4.8+commit.60cc1668","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"","Library":"","LicenseType":"","SwarmSource":"bzzr://612b55f256952f0e37731e4dc773431cd76e980ce06380eea10676cc0b1582a0"}
