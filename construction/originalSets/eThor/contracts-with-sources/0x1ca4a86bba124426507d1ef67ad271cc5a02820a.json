{"SourceCode":"contract Token { \r\n    function transferFrom(address _from, address _to, uint256 _value) returns (bool success);\r\n}\r\n\r\n// replay protection\r\ncontract ReplayProtection {\r\n    bool public isMainChain;\r\n\r\n    function ReplayProtection() {\r\n        bytes32 blockHash = 0xcf9055c648b3689a2b74e980fc6fa27817622fa9ac0749d60a6489a7fbcfe831;\r\n        // creates a unique signature with the latest 16 blocks\r\n        for (uint i = 1; i < 64; i++) {\r\n            if (blockHash == block.blockhash(block.number - i)) isMainChain = true;\r\n        }\r\n    }\r\n\r\n    // Splits the funds into 2 addresses\r\n    function etherSplit(address recipient, address altChainRecipient) returns(bool) {\r\n        if (isMainChain && recipient.send(msg.value)) {\r\n            return true;\r\n        } else if (!isMainChain && altChainRecipient > 0 && altChainRecipient.send(msg.value)) {\r\n            return true;\r\n        }\r\n        throw; // don't accept value transfer, otherwise it would be trapped.\r\n    }\r\n\r\n\r\n    function tokenSplit(address recipient, address altChainRecipient, address tokenAddress, uint amount) returns (bool) {\r\n        if (msg.value > 0 ) throw;\r\n\r\n        Token token = Token(tokenAddress);\r\n\r\n        if (isMainChain && token.transferFrom(msg.sender, recipient, amount)) {\r\n            return true;\r\n        } else if (!isMainChain && altChainRecipient > 0 && token.transferFrom(msg.sender, altChainRecipient, amount)) {\r\n            return true;\r\n        }\r\n        throw;\r\n    }\r\n\r\n    function () {\r\n        throw;\r\n    }\r\n}","ABI":"[{\"constant\":false,\"inputs\":[{\"name\":\"recipient\",\"type\":\"address\"},{\"name\":\"altChainRecipient\",\"type\":\"address\"},{\"name\":\"tokenAddress\",\"type\":\"address\"},{\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"tokenSplit\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"isMainChain\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"recipient\",\"type\":\"address\"},{\"name\":\"altChainRecipient\",\"type\":\"address\"}],\"name\":\"etherSplit\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"type\":\"function\"},{\"inputs\":[],\"type\":\"constructor\"}]","ContractName":"ReplayProtection","CompilerVersion":"v0.3.5-2016-07-21-6610add","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"","Library":"","LicenseType":"","SwarmSource":""}
