{"SourceCode":"pragma solidity ^0.4.4;\r\n\r\ncontract mortal {\r\n    /* Define variable owner of the type address*/\r\n    address owner;\r\n\r\n    /* this function is executed at initialization and sets the owner of the contract */\r\n    function mortal() { owner = msg.sender; }\r\n\r\n    /* Function to recover the funds on the contract */\r\n    function kill() { if (msg.sender == owner) selfdestruct(owner); }\r\n}\r\n\r\n\r\n\r\n\r\ncontract BananaBasket is mortal {\r\n    event HistoryUpdated(string picId, uint[] result);\r\n    address _owner;\r\n\r\n    struct BasketState\r\n    {\r\n        //string picHash;\r\n        mapping (uint=>uint) ratings;\r\n    }\r\n\r\n    mapping (string=>BasketState) basketStateHistory;\r\n\r\n    \r\n\r\n    function BananaBasket()\r\n    {\r\n        _owner = msg.sender;\r\n    }\r\n\r\n    function addNewState(string id, uint[] memory ratings)\r\n    {\r\n        basketStateHistory[id] = BasketState();\r\n\r\n        for (var index = 0;  index < ratings.length; ++index) {\r\n            basketStateHistory[id].ratings[index + 1] = ratings[index];\r\n        }\r\n\r\n        HistoryUpdated(id, ratings);\r\n    }\r\n\r\n\r\n\r\n    function getHistory(string id) constant \r\n    returns(uint[5] ratings)\r\n    {\r\n        //pichash = id;\r\n        for (var index = 0;  index < 5; ++index) {\r\n            ratings[index] = basketStateHistory[id].ratings[index + 1];\r\n        }\r\n    }\r\n}","ABI":"[{\"constant\":false,\"inputs\":[],\"name\":\"kill\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"id\",\"type\":\"string\"},{\"name\":\"ratings\",\"type\":\"uint256[]\"}],\"name\":\"addNewState\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"id\",\"type\":\"string\"}],\"name\":\"getHistory\",\"outputs\":[{\"name\":\"ratings\",\"type\":\"uint256[5]\"}],\"payable\":false,\"type\":\"function\"},{\"inputs\":[],\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"picId\",\"type\":\"string\"},{\"indexed\":false,\"name\":\"result\",\"type\":\"uint256[]\"}],\"name\":\"HistoryUpdated\",\"type\":\"event\"}]","ContractName":"BananaBasket","CompilerVersion":"v0.4.4+commit.4633f3de","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"","Library":"","LicenseType":"","SwarmSource":""}
