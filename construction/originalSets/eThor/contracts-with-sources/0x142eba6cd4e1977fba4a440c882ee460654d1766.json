{"SourceCode":"pragma solidity ^0.4.8;\r\n\r\ncontract testingToken {\r\n\tmapping (address => uint256) public balanceOf;\r\n\tmapping (address => uint256) public weiWantedOf;\r\n\tmapping (address => uint256) public tokensOfferedOf;\r\n\tmapping (address => bool) public tradeActive;\r\n\taddress public bank;\r\n\tuint256 public ethTaxRate = 10;\r\n\tuint256 public tokenTaxRate = 5;\r\n\tfunction testingToken() {\r\n\t\tbank = msg.sender;\r\n\t\tbalanceOf[msg.sender] = 100000;\r\n\t}\r\n\t\r\n\tfunction send(address _to, uint256 _value) { //give tokens to someone\r\n\t\tif (balanceOf[msg.sender]<_value) throw;\r\n\t\tif (balanceOf[_to]+_value<balanceOf[_to]) throw;\r\n\t\tif (_value<0) throw;\r\n\t\tbalanceOf[msg.sender] -= _value;\r\n\t\tbalanceOf[_to] += (_value*(100-tokenTaxRate))/100;\r\n\t\tbalanceOf[bank] += (_value*tokenTaxRate)/100;\r\n\t\t//now check for rounding down which would result in permanent loss of coins\r\n\t\tif (((_value*tokenTaxRate*10)/100)%10 != 0) balanceOf[bank]+=1;\r\n\t}\r\n\t\r\n\tfunction offerTrade(uint256 _weiWanted, uint256 _tokensOffered) { //offer the amt of ether you want and the amt of tokens youd give\r\n\t    weiWantedOf[msg.sender] = _weiWanted;\r\n\t    tokensOfferedOf[msg.sender] = _tokensOffered;\r\n\t    tradeActive[msg.sender] = true;\r\n\t}\r\n\tfunction agreeToTrade(address _from) payable { //choose a trade to agree to and execute it\r\n\t    if (!tradeActive[_from]) throw;\r\n\t    if (weiWantedOf[_from]!=msg.value) throw;\r\n\t    if (balanceOf[_from]<tokensOfferedOf[_from]) throw;\r\n\t    if (!_from.send((msg.value*(100-ethTaxRate))/100)) throw;\r\n\t    balanceOf[_from] -= tokensOfferedOf[_from];\r\n\t    balanceOf[msg.sender] += (tokensOfferedOf[_from]*(100-tokenTaxRate))/100;\r\n\t\tbalanceOf[bank] += (tokensOfferedOf[_from]*tokenTaxRate)/100;\r\n\t\ttradeActive[_from] = false;\r\n\t\t//now check for rounding down which would result in permanent loss of coins\r\n\t\tif (((tokensOfferedOf[_from]*tokenTaxRate*10)/100)%10 != 0) balanceOf[bank]+=1;\r\n\t}\r\n\t\r\n\tmodifier bankOnly {\r\n\t\tif (msg.sender != bank) throw;\r\n\t\t_;\r\n\t}\r\n\t\r\n\tfunction setTaxes(uint256 _ethTaxRate, uint256 _tokenTaxRate) bankOnly { //the bank can change the tax rates\r\n\t\tethTaxRate = _ethTaxRate;\r\n\t\ttokenTaxRate = _tokenTaxRate;\r\n\t}\r\n\tfunction extractWei(uint256 _wei) bankOnly { //withdraw money from the contract\r\n\t\tif (!msg.sender.send(_wei)) throw;\r\n\t}\r\n\tfunction transferOwnership(address _bank) bankOnly { //change owner\r\n\t\tbank = _bank;\r\n\t}\r\n}","ABI":"[{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"weiWantedOf\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_wei\",\"type\":\"uint256\"}],\"name\":\"extractWei\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"tokensOfferedOf\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"tradeActive\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"balanceOf\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"bank\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_from\",\"type\":\"address\"}],\"name\":\"agreeToTrade\",\"outputs\":[],\"payable\":true,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_ethTaxRate\",\"type\":\"uint256\"},{\"name\":\"_tokenTaxRate\",\"type\":\"uint256\"}],\"name\":\"setTaxes\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_value\",\"type\":\"uint256\"}],\"name\":\"send\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"ethTaxRate\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"tokenTaxRate\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_bank\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_weiWanted\",\"type\":\"uint256\"},{\"name\":\"_tokensOffered\",\"type\":\"uint256\"}],\"name\":\"offerTrade\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"type\":\"constructor\"}]","ContractName":"testingToken","CompilerVersion":"v0.4.8+commit.60cc1668","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"","Library":"","LicenseType":"","SwarmSource":"bzzr://f4d5895bdee96252069fdd3fb523cc55a5b479cb80e988b1c2bcad07d4178f4d"}
