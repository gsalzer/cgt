{"SourceCode":"pragma solidity ^0.4.2;\r\n\r\ncontract OwnedI {\r\n    event LogOwnerChanged(address indexed previousOwner, address indexed newOwner);\r\n\r\n    function getOwner()\r\n        constant\r\n        returns (address);\r\n\r\n    function setOwner(address newOwner)\r\n        returns (bool success); \r\n}\r\n\r\ncontract Owned is OwnedI {\r\n    /**\r\n     * @dev Made private to protect against child contract setting it to 0 by mistake.\r\n     */\r\n    address private owner;\r\n\r\n    function Owned() {\r\n        owner = msg.sender;\r\n    }\r\n\r\n    modifier fromOwner {\r\n        if (msg.sender != owner) {\r\n            throw;\r\n        }\r\n        _;\r\n    }\r\n\r\n    function getOwner()\r\n        constant\r\n        returns (address) {\r\n        return owner;\r\n    }\r\n\r\n    function setOwner(address newOwner)\r\n        fromOwner \r\n        returns (bool success) {\r\n        if (newOwner == 0) {\r\n            throw;\r\n        }\r\n        if (owner != newOwner) {\r\n            LogOwnerChanged(owner, newOwner);\r\n            owner = newOwner;\r\n        }\r\n        success = true;\r\n    }\r\n}\r\n\r\ncontract BalanceFixable is OwnedI {\r\n    function fixBalance() \r\n        returns (bool success) {\r\n        if (!getOwner().send(this.balance)) {\r\n            throw;\r\n        }\r\n        return true;\r\n    }\r\n}\r\n\r\ncontract Migrations is Owned, BalanceFixable {\r\n    uint public last_completed_migration;\r\n    address public allowedAccount;\r\n\r\n    function Migrations() {\r\n        if(msg.value > 0) throw;\r\n    }\r\n\r\n    function setCompleted(uint completed) {\r\n        if (msg.sender != getOwner()\r\n            && msg.sender != allowedAccount) {\r\n            throw;\r\n        }\r\n        last_completed_migration = completed;\r\n    }\r\n\r\n    function setAllowedAccount(address _allowedAccount) fromOwner {\r\n        allowedAccount = _allowedAccount;\r\n    }\r\n\r\n    function upgrade(address new_address) fromOwner {\r\n        Migrations upgraded = Migrations(new_address);\r\n        upgraded.setCompleted(last_completed_migration);\r\n    }\r\n}","ABI":"[{\"constant\":false,\"inputs\":[{\"name\":\"new_address\",\"type\":\"address\"}],\"name\":\"upgrade\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"setOwner\",\"outputs\":[{\"name\":\"success\",\"type\":\"bool\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"last_completed_migration\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_allowedAccount\",\"type\":\"address\"}],\"name\":\"setAllowedAccount\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getOwner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"fixBalance\",\"outputs\":[{\"name\":\"success\",\"type\":\"bool\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"allowedAccount\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"completed\",\"type\":\"uint256\"}],\"name\":\"setCompleted\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"inputs\":[],\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"previousOwner\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"LogOwnerChanged\",\"type\":\"event\"}]","ContractName":"Migrations","CompilerVersion":"v0.4.2+commit.af6afb04","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"","Library":"","LicenseType":"","SwarmSource":""}
