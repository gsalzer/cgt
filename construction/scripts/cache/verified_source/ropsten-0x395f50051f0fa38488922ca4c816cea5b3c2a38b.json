{"status": "1", "message": "OK", "result": [{"SourceCode": "pragma solidity ^0.4.9;\r\n\r\ncontract TimeStamp{\r\n    \r\n    struct AckReceipt {\r\n        \r\n        bool exists;\r\n        address receiver;\r\n        string login;\r\n        string dateReceipt;\r\n    }\r\n\r\n    struct SharedDocument {\r\n\r\n        string sharedDocumentId;\r\n        string dateShared;\r\n        string sharedLogin;\r\n    }\r\n    \r\n    struct Download {\r\n        string dateDownload;\r\n        string login;\r\n    }\r\n\r\n    struct DocumentRecord {\r\n\r\n        bool exists;\r\n        string dateUploaded;\r\n        string documentHash;\r\n        string ownerLogin;\r\n        SharedDocument[] sharedDocuments;\r\n        Download[] downloads;\r\n    }\r\n\r\n\r\n    address owner;\r\n    address newContract;\r\n    address oldContract;\r\n\r\n    //Mapping documentId => DocumentRecord\r\n    mapping(string => DocumentRecord) documentRecords;\r\n    string[] documentIds;\r\n    \r\n    //Mapping sharedDocumentId => remove date\r\n    mapping(string => string) sharedDocumentsRemoveDate;\r\n    \r\n    //Mapping sharedDocumentId => AckReceipt\r\n    mapping(string => AckReceipt) sharedDocumentsAckReceipt;\r\n    \r\n    \r\n\r\n\r\n    //modifier ownercontract { if(msg.sender == owner || msg.sender == newContract) _;}\r\n    modifier onlyowner { if(msg.sender == owner) _;}\r\n\r\n\r\n    function TimeStamp() payable {\r\n        owner = msg.sender;\r\n    }\r\n\r\n\r\n    function getDocumentRecord(uint _index) constant returns(string o_documentId, string o_dateUploaded, uint o_numberShares, uint o_numberDownloads, string o_documentHash, string o_ownerLogin){\r\n\r\n        if(_index >= documentIds.length){\r\n            throw;\r\n        }\r\n\r\n        DocumentRecord result = documentRecords[documentIds[_index]];\r\n        return (documentIds[_index], result.dateUploaded, result.sharedDocuments.length, result.downloads.length, result.documentHash, result.ownerLogin);\r\n    }\r\n\r\n\r\n    function getDocumentRecordById(string _documentId) constant returns(string o_dateUploaded, uint o_numberShares, uint o_numberDownloads, string o_documentHash, string o_ownerLogin){\r\n\r\n        DocumentRecord result = documentRecords[_documentId];\r\n        return (result.dateUploaded, result.sharedDocuments.length, result.downloads.length, result.ownerLogin, result.documentHash);\r\n    }\r\n\r\n\r\n    function getSharedDocument(string _documentId, uint _sharedDocumentIndex) constant \r\n                                        returns(string o_sharedDocumentId, string o_dateShared, string o_sharedLogin, string o_dateReceipt, string o_dateRemoved){\r\n\r\n        DocumentRecord result = documentRecords[_documentId];\r\n        SharedDocument sharedResult = result.sharedDocuments[_sharedDocumentIndex];\r\n\r\n        return (sharedResult.sharedDocumentId, sharedResult.dateShared, sharedResult.sharedLogin, \r\n                sharedDocumentsAckReceipt[sharedResult.sharedDocumentId].dateReceipt, sharedDocumentsRemoveDate[sharedResult.sharedDocumentId]);\r\n    }\r\n    \r\n    \r\n    function getDocumentRecordsNumber() constant returns (uint n){\r\n\r\n        return documentIds.length;\r\n    }\r\n\r\n\r\n    function addDocumentRecord(string _documentId, string _dateUploaded, string _documentHash, string _ownerLogin) onlyowner returns (uint o_index) {\r\n\r\n        if(documentRecords[_documentId].exists){\r\n            throw;\r\n        }\r\n\r\n        uint index = documentIds.length;\r\n        documentIds.length++;\r\n        documentIds[index] = _documentId;\r\n\r\n        documentRecords[_documentId].exists = true;\r\n        documentRecords[_documentId].dateUploaded = _dateUploaded;\r\n        documentRecords[_documentId].documentHash = _documentHash;\r\n        documentRecords[_documentId].ownerLogin = _ownerLogin;\r\n\r\n        return index;\r\n    }\r\n    \r\n    \r\n    function addDocumentDownload(string _documentId, string _dateDownload, string _login) onlyowner returns (uint o_index) {\r\n        \r\n        DocumentRecord record = documentRecords[_documentId];\r\n        if(!record.exists){\r\n            throw;\r\n        }\r\n        \r\n        uint index = record.downloads.length;\r\n        record.downloads.length++;\r\n        record.downloads[index].login = _login;\r\n        record.downloads[index].dateDownload = _dateDownload;\r\n        \r\n        return index;\r\n    }\r\n\r\n\r\n    function addSharedDocument(string _documentId, string _dateShared, string _sharedDocumentId, string _sharedLogin) onlyowner returns (uint o_index) {\r\n\r\n        DocumentRecord record = documentRecords[_documentId];\r\n        if(!record.exists){\r\n            throw;\r\n        }\r\n\r\n        uint index = record.sharedDocuments.length;\r\n        record.sharedDocuments.length++;\r\n        record.sharedDocuments[index].sharedDocumentId = _sharedDocumentId;\r\n        record.sharedDocuments[index].dateShared = _dateShared;\r\n        record.sharedDocuments[index].sharedLogin = _sharedLogin;\r\n\r\n        return index;\r\n    }\r\n    \r\n    \r\n    function setSharedDocumentRemoveDate(string _sharedDocumentId, string dateRemoved) onlyowner returns (uint o_index) {\r\n        \r\n        if(bytes(sharedDocumentsRemoveDate[_sharedDocumentId]).length > 0){\r\n            throw;\r\n        }\r\n        \r\n        sharedDocumentsRemoveDate[_sharedDocumentId] = dateRemoved;\r\n        return 0;\r\n    }    \r\n    \r\n\r\n    function setSharedDocumentAckReceipt(string _sharedDocumentId, string _dateReceipt, string _login) returns (uint o_index) {\r\n        \r\n        if(sharedDocumentsAckReceipt[_sharedDocumentId].exists){\r\n            throw;\r\n        }\r\n        \r\n        sharedDocumentsAckReceipt[_sharedDocumentId].exists = true;\r\n        sharedDocumentsAckReceipt[_sharedDocumentId].dateReceipt = _dateReceipt;\r\n        \r\n        if(msg.sender != owner){\r\n            sharedDocumentsAckReceipt[_sharedDocumentId].receiver = msg.sender;\r\n            sharedDocumentsAckReceipt[_sharedDocumentId].login = _login;\r\n        }\r\n        \r\n        return 0;\r\n    }\r\n    \r\n    \r\n    function setSharedDocumentAckReceiptOwner(string _sharedDocumentId, string _dateReceipt) onlyowner returns (uint o_index) {\r\n        \r\n        if(sharedDocumentsAckReceipt[_sharedDocumentId].exists){\r\n            throw;\r\n        }\r\n        \r\n        sharedDocumentsAckReceipt[_sharedDocumentId].exists = true;\r\n        sharedDocumentsAckReceipt[_sharedDocumentId].dateReceipt = _dateReceipt;\r\n        \r\n        return 0;\r\n    }\r\n\r\n\r\n    function setOwner(address _newOwner) onlyowner {\r\n        owner = _newOwner;\r\n    }\r\n\r\n\r\n    function setNewContract(address _newContract) onlyowner {\r\n        newContract = _newContract;\r\n    }\r\n\r\n\r\n    function setOldContract(address _oldContract) onlyowner {\r\n        oldContract = _oldContract;\r\n    }\r\n\r\n\r\n    function getOldContract() onlyowner constant returns (address o_a){\r\n        return oldContract;\r\n    }\r\n    \r\n    \r\n    function destroy() onlyowner {\r\n        suicide(owner); // send funds to owner\r\n    }\r\n\r\n\r\n    function isOwner() constant onlyowner returns(bool o_b){\r\n        return true;\r\n    }\r\n\r\n\r\n    function getOwner() constant returns (address o_a){\r\n        return owner;\r\n    }\r\n\r\n}", "ABI": "[{\"constant\":false,\"inputs\":[{\"name\":\"_newOwner\",\"type\":\"address\"}],\"name\":\"setOwner\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_documentId\",\"type\":\"string\"},{\"name\":\"_dateUploaded\",\"type\":\"string\"},{\"name\":\"_documentHash\",\"type\":\"string\"},{\"name\":\"_ownerLogin\",\"type\":\"string\"}],\"name\":\"addDocumentRecord\",\"outputs\":[{\"name\":\"o_index\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getDocumentRecordsNumber\",\"outputs\":[{\"name\":\"n\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_sharedDocumentId\",\"type\":\"string\"},{\"name\":\"_dateReceipt\",\"type\":\"string\"},{\"name\":\"_login\",\"type\":\"string\"}],\"name\":\"setSharedDocumentAckReceipt\",\"outputs\":[{\"name\":\"o_index\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_sharedDocumentId\",\"type\":\"string\"},{\"name\":\"dateRemoved\",\"type\":\"string\"}],\"name\":\"setSharedDocumentRemoveDate\",\"outputs\":[{\"name\":\"o_index\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_sharedDocumentId\",\"type\":\"string\"},{\"name\":\"_dateReceipt\",\"type\":\"string\"}],\"name\":\"setSharedDocumentAckReceiptOwner\",\"outputs\":[{\"name\":\"o_index\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_documentId\",\"type\":\"string\"},{\"name\":\"_sharedDocumentIndex\",\"type\":\"uint256\"}],\"name\":\"getSharedDocument\",\"outputs\":[{\"name\":\"o_sharedDocumentId\",\"type\":\"string\"},{\"name\":\"o_dateShared\",\"type\":\"string\"},{\"name\":\"o_sharedLogin\",\"type\":\"string\"},{\"name\":\"o_dateReceipt\",\"type\":\"string\"},{\"name\":\"o_dateRemoved\",\"type\":\"string\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"destroy\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getOwner\",\"outputs\":[{\"name\":\"o_a\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"isOwner\",\"outputs\":[{\"name\":\"o_b\",\"type\":\"bool\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_documentId\",\"type\":\"string\"},{\"name\":\"_dateShared\",\"type\":\"string\"},{\"name\":\"_sharedDocumentId\",\"type\":\"string\"},{\"name\":\"_sharedLogin\",\"type\":\"string\"}],\"name\":\"addSharedDocument\",\"outputs\":[{\"name\":\"o_index\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_newContract\",\"type\":\"address\"}],\"name\":\"setNewContract\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_oldContract\",\"type\":\"address\"}],\"name\":\"setOldContract\",\"outputs\":[],\"payable\":false,\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_documentId\",\"type\":\"string\"},{\"name\":\"_dateDownload\",\"type\":\"string\"},{\"name\":\"_login\",\"type\":\"string\"}],\"name\":\"addDocumentDownload\",\"outputs\":[{\"name\":\"o_index\",\"type\":\"uint256\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getOldContract\",\"outputs\":[{\"name\":\"o_a\",\"type\":\"address\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_index\",\"type\":\"uint256\"}],\"name\":\"getDocumentRecord\",\"outputs\":[{\"name\":\"o_documentId\",\"type\":\"string\"},{\"name\":\"o_dateUploaded\",\"type\":\"string\"},{\"name\":\"o_numberShares\",\"type\":\"uint256\"},{\"name\":\"o_numberDownloads\",\"type\":\"uint256\"},{\"name\":\"o_documentHash\",\"type\":\"string\"},{\"name\":\"o_ownerLogin\",\"type\":\"string\"}],\"payable\":false,\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_documentId\",\"type\":\"string\"}],\"name\":\"getDocumentRecordById\",\"outputs\":[{\"name\":\"o_dateUploaded\",\"type\":\"string\"},{\"name\":\"o_numberShares\",\"type\":\"uint256\"},{\"name\":\"o_numberDownloads\",\"type\":\"uint256\"},{\"name\":\"o_documentHash\",\"type\":\"string\"},{\"name\":\"o_ownerLogin\",\"type\":\"string\"}],\"payable\":false,\"type\":\"function\"},{\"inputs\":[],\"payable\":true,\"type\":\"constructor\"}]", "ContractName": "TimeStamp", "CompilerVersion": "v0.4.9+commit.364da425", "OptimizationUsed": "1", "Runs": "200", "ConstructorArguments": "", "EVMVersion": "Default", "Library": "", "LicenseType": "", "Proxy": "0", "Implementation": "", "SwarmSource": "bzzr://82fc6916115459a59bc3f568995e5920dcafc90a78df4b227b40ccb5234f14ef"}]}