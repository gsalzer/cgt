{"status": "1", "message": "OK", "result": [{"SourceCode": "pragma solidity ^0.4.0;\r\n\r\ncontract EtherTanksCore {\r\n    \r\n    struct TankHull {\r\n        uint32 armor; // Hull's armor value\r\n        uint32 speed; // Hull's speed value\r\n        uint8 league; // The battle league which allows to play with this hull type\r\n    }\r\n    \r\n    struct TankWeapon {\r\n        uint32 minDamage; // Weapon minimal damage value\r\n        uint32 maxDamage; // Weapon maximum damage value\r\n        uint32 attackSpeed; // Weapon's attack speed value\r\n        uint8 league; // The battle league which allows to play with this weapon type\r\n    }\r\n    \r\n    struct TankProduct {\r\n        string name; // Tank's name\r\n        uint32 hull; // Hull's ID\r\n        uint32 weapon; // Weapon's ID\r\n        // Unfortunately, it's impossible to define the variable inside the struct as constant.\r\n        // However, you can read this smart-contract and see that there are no changes at all related to the start prices.\r\n        uint256 startPrice;\r\n        uint256 currentPrice; // The current price. Changes every time someone buys this kind of tank\r\n        uint256 earning; // The amount of earning each owner of this tank gets when someone buys this type of tank\r\n        uint256 releaseTime; // The moment when it will be allowed to buy this type of tank\r\n        uint32 amountOfTanks; // The amount of tanks with this kind of product\r\n        \r\n    }\r\n        \r\n    struct TankEntity {\r\n        uint32 productID;\r\n        uint8[4] upgrades;\r\n        address owner; // The address of the owner of this tank\r\n        address earner; // The address of the earner of this tank who get paid\r\n        bool selling; // Is this tank on the auction now?\r\n        uint256 auctionEntity; // If it's on the auction,\r\n        uint256 earned; // Total funds earned with this tank\r\n        uint32 exp; // Tank's experience\r\n        uint32 lastCashoutIndex; // Last amount of tanks existing in the game with the same ProductID\r\n    }\r\n    \r\n\r\n    struct AuctionEntity {\r\n        uint32 tankId;\r\n        uint256 startPrice;\r\n        uint256 finishPrice;\r\n        uint256 startTime;\r\n        uint256 duration;\r\n    }\r\n    \r\n    event EventCashOut (\r\n       address indexed player,\r\n       uint256 amount\r\n       ); //;-)\r\n    \r\n    event EventLogin (\r\n        address indexed player,\r\n        string hash\r\n        ); //;-)\r\n    \r\n    event EventUpgradeTank (\r\n        address indexed player,\r\n        uint32 tankID,\r\n        uint8 upgradeChoice\r\n        ); // ;-)\r\n    \r\n    event EventTransfer (\r\n        address indexed player,\r\n        address indexed receiver,\r\n        uint32 tankID\r\n        ); // ;-)\r\n        \r\n    event EventTransferAction (\r\n        address indexed player,\r\n        address indexed receiver,\r\n        uint32 tankID,\r\n        uint8 ActionType\r\n        ); // ;-)\r\n        \r\n    event EventAuction (\r\n        address indexed player,\r\n        uint32 tankID,\r\n        uint256 startPrice,\r\n        uint256 finishPrice,\r\n        uint256 duration,\r\n        uint256 currentTime\r\n        ); // ;-)\r\n    event EventCancelAuction (\r\n        uint32 tankID\r\n        ); // ;-)\r\n    \r\n    event EventBid (\r\n        uint32 tankID  \r\n        ); // ;-)\r\n    \r\n    event EventProduct (\r\n        uint32 productID,\r\n        string name,\r\n        uint32 hull,\r\n        uint32 weapon,\r\n        uint256 price,\r\n        uint256 earning,\r\n        uint256 releaseTime,\r\n        uint256 currentTime\r\n        ); // ;-)\r\n        \r\n    event EventBuyTank (\r\n        address indexed player,\r\n        uint32 productID,\r\n        uint32 tankID\r\n        ); // ;-)\r\n\r\n    \r\n    address public UpgradeMaster; // Earns fees for upgrading tanks (0.05 Eth)\r\n    address public AuctionMaster; // Earns fees for producing auctions (3%)\r\n    address public TankSellMaster; // Earns fees for selling tanks (start price)\r\n    address public ExportMaster; // Exports tanks from the previous contract.\r\n    bool public canExport = true; // If false -- the exporting is not allowed for this contract forever, so it's safe.\r\n    // No modifiers were needed, because each access is checked no more than one time in the whole code,\r\n    // So calling \"require(msg.sender == UpgradeMaster);\" is enough.\r\n    \r\n    function ChangeUpgradeMaster (address _newMaster) public {\r\n        require(msg.sender == UpgradeMaster);\r\n        UpgradeMaster = _newMaster;\r\n    }\r\n    \r\n    function ChangeTankSellMaster (address _newMaster) public {\r\n        require(msg.sender == TankSellMaster);\r\n        TankSellMaster = _newMaster;\r\n    }\r\n    \r\n    function ChangeAuctionMaster (address _newMaster) public {\r\n        require(msg.sender == AuctionMaster);\r\n        AuctionMaster = _newMaster;\r\n    }\r\n    \r\n    function FinishedExporting () public {\r\n        require(msg.sender == ExportMaster);\r\n        canExport = false; // Now, the exporting process has been finished, so we do not need to export anything anymore. Done.\r\n    }\r\n    \r\n    function EtherTanksCore() public {\r\n        \r\n        UpgradeMaster = msg.sender;\r\n        AuctionMaster = msg.sender;\r\n        TankSellMaster = msg.sender;\r\n        ExportMaster = msg.sender;\r\n\r\n        // Creating 11 hulls\r\n        newTankHull(100, 5, 1);\r\n        newTankHull(60, 6, 2);\r\n        newTankHull(140, 4, 1);\r\n        newTankHull(200, 3, 1);\r\n        newTankHull(240, 3, 1);\r\n        newTankHull(200, 6, 2);\r\n        newTankHull(360, 4, 2);\r\n        newTankHull(180, 9, 3);\r\n        newTankHull(240, 8, 3);\r\n        newTankHull(500, 4, 2);\r\n        newTankHull(440, 6, 3);\r\n        \r\n        // Creating 11 weapons\r\n        newTankWeapon(6, 14, 5, 1);\r\n        newTankWeapon(18, 26, 3, 2);\r\n        newTankWeapon(44, 66, 2, 1);\r\n        newTankWeapon(21, 49, 3, 1);\r\n        newTankWeapon(60, 90, 2, 2);\r\n        newTankWeapon(21, 49, 2, 2);\r\n        newTankWeapon(48, 72, 3, 2);\r\n        newTankWeapon(13, 29, 9, 3);\r\n        newTankWeapon(36, 84, 4, 3);\r\n        newTankWeapon(120, 180, 2, 3);\r\n        newTankWeapon(72, 108, 4, 3);\r\n        \r\n        // Creating first 11 tank types\r\n        newTankProduct(\"LT-1\", 1, 1, 10000000000000000, 100000000000000, now);\r\n        newTankProduct(\"LT-2\", 2, 2, 50000000000000000, 500000000000000, now);\r\n        newTankProduct(\"MT-1\", 3, 3, 100000000000000000, 1000000000000000, now);\r\n        newTankProduct(\"HT-1\", 4, 4, 500000000000000000, 5000000000000000, now);\r\n        newTankProduct(\"SPG-1\", 5, 5, 500000000000000000, 5000000000000000, now);\r\n        newTankProduct(\"MT-2\", 6, 6, 700000000000000000, 7000000000000000, now);\r\n        newTankProduct(\"HT-2\", 7, 7, 1500000000000000000, 15000000000000000, now);\r\n        newTankProduct(\"LT-3\", 8, 8, 300000000000000000, 3000000000000000, now);\r\n        newTankProduct(\"MT-3\", 9, 9, 1500000000000000000, 15000000000000000, now);\r\n        newTankProduct(\"SPG-2\", 10, 10, 2000000000000000000, 20000000000000000, now+(60*60*5));\r\n        newTankProduct(\"HT-3\", 11, 11, 2500000000000000000, 25000000000000000, now+(60*60*5));\r\n    }\r\n    \r\n    function cashOut (uint256 _amount) public payable {\r\n        require (canExport == false); // Can be called only if the process of exporting has been completed\r\n\r\n        require (_amount >= 0); //just in case\r\n        require (_amount == uint256(uint128(_amount))); // Just some magic stuff\r\n        require (this.balance >= _amount); // Checking if this contract has enought money to pay\r\n        require (balances[msg.sender] >= _amount); // Checking if player has enough funds on his balance\r\n        if (_amount == 0){\r\n            _amount = balances[msg.sender];\r\n            // If the requested amount is 0, it means that player wants to cashout the whole amount of balance\r\n        }\r\n        \r\n        balances[msg.sender] -= _amount; // Changing the amount of funds on the player's in-game balance\r\n        \r\n        if (!msg.sender.send(_amount)){ // Sending funds and if the transaction is failed\r\n            balances[msg.sender] += _amount; // Returning the amount of funds on the player's in-game balance\r\n        }\r\n        \r\n        EventCashOut (msg.sender, _amount);\r\n        return;\r\n    }\r\n    \r\n    function cashOutTank (uint32 _tankID) public payable {\r\n        require (canExport == false); // Can be called only if the process of exporting has been completed\r\n        \r\n        require (_tankID > 0 && _tankID < newIdTank); // Checking if the tank exists\r\n        require (tanks[_tankID].owner == msg.sender); // Checking if sender owns this tank\r\n        uint256 _amount = tankProducts[tanks[_tankID].productID].earning*(tankProducts[tanks[_tankID].productID].amountOfTanks-tanks[_tankID].lastCashoutIndex);\r\n        require (this.balance >= _amount); // Checking if this contract has enought money to pay\r\n        require (_amount > 0);\r\n        \r\n        uint32 lastIndex = tanks[_tankID].lastCashoutIndex;\r\n        \r\n        tanks[_tankID].lastCashoutIndex = tankProducts[tanks[_tankID].productID].amountOfTanks; // Changing the amount of funds on the tanks's in-game balance\r\n        \r\n        if (!tanks[_tankID].owner.send(_amount)){ // Sending funds and if the transaction is failed\r\n            tanks[_tankID].lastCashoutIndex = lastIndex; // Changing the amount of funds on the tanks's in-game balance\r\n        }\r\n        \r\n        EventCashOut (msg.sender, _amount);\r\n        return;\r\n    }\r\n    \r\n    function login (string _hash) public {\r\n        EventLogin (msg.sender, _hash);\r\n        return;\r\n    }\r\n    \r\n    //upgrade tank\r\n    // @_upgradeChoice: 0 is for armor, 1 is for damage, 2 is for speed, 3 is for attack speed\r\n    function upgradeTank (uint32 _tankID, uint8 _upgradeChoice) public payable {\r\n        require (_tankID > 0 && _tankID < newIdTank); // Checking if the tank exists\r\n        require (tanks[_tankID].owner == msg.sender); // Checking if sender owns this tank\r\n        require (_upgradeChoice >= 0 && _upgradeChoice < 4); // Has to be between 0 and 3\r\n        require (tanks[_tankID].upgrades[_upgradeChoice] < 5); // Only 5 upgrades are allowed for each type of tank's parametres\r\n        require (msg.value >= upgradePrice); // Checking if there is enough amount of money for the upgrade\r\n        tanks[_tankID].upgrades[_upgradeChoice]++; // Upgrading\r\n        balances[msg.sender] += msg.value-upgradePrice; // Returning the rest amount of money back to the tank owner\r\n        balances[UpgradeMaster] += upgradePrice; // Sending the amount of money spent on the upgrade to the contract creator\r\n        \r\n        EventUpgradeTank (msg.sender, _tankID, _upgradeChoice);\r\n        return;\r\n    }\r\n    \r\n    \r\n    // Transfer. Using for sending tanks to another players\r\n    function _transfer (uint32 _tankID, address _receiver) public {\r\n        require (_tankID > 0 && _tankID < newIdTank); // Checking if the tank exists\r\n        require (tanks[_tankID].owner == msg.sender); //Checking if sender owns this tank\r\n        require (msg.sender != _receiver); // Checking that the owner is not sending the tank to himself\r\n        require (tanks[_tankID].selling == false); //Making sure that the tank is not on the auction now\r\n        tanks[_tankID].owner = _receiver; // Changing the tank's owner\r\n        tanks[_tankID].earner = _receiver; // Changing the tank's earner address\r\n\r\n        EventTransfer (msg.sender, _receiver, _tankID);\r\n        return;\r\n    }\r\n    \r\n    // Transfer Action. Using for sending tanks to EtherTanks' contracts. For example, the battle-area contract.\r\n    function _transferAction (uint32 _tankID, address _receiver, uint8 _ActionType) public {\r\n        require (_tankID > 0 && _tankID < newIdTank); // Checking if the tank exists\r\n        require (tanks[_tankID].owner == msg.sender); // Checking if sender owns this tank\r\n        require (msg.sender != _receiver); // Checking that the owner is not sending the tank to himself\r\n        require (tanks[_tankID].selling == false); // Making sure that the tank is not on the auction now\r\n        tanks[_tankID].owner = _receiver; // Changing the tank's owner\r\n        \r\n        // As you can see, we do not change the earner here.\r\n        // It means that technically speaking, the tank's owner is still getting his earnings.\r\n        // It's logically that this method (transferAction) will be used for sending tanks to the battle area contract or some other contracts which will be interacting with tanks\r\n        // Be careful with this method! Do not call it to transfer tanks to another player!\r\n        // The reason you should not do this is that the method called \"transfer\" changes the owner and earner, so it is possible to change the earner address to the current owner address any time.\r\n        // However, for our special contracts like battle area, you are able to read this contract and make sure that your tank will not be sent to anyone else, only back to you.\r\n        // So, please, do not use this method to send your tanks to other players. Use it just for interacting with EtherTanks' contracts, which will be listed on EtherTanks.com\r\n        \r\n        EventTransferAction (msg.sender, _receiver, _tankID, _ActionType);\r\n        return;\r\n    }\r\n    \r\n    //selling\r\n    function sellTank (uint32 _tankID, uint256 _startPrice, uint256 _finishPrice, uint256 _duration) public {\r\n        require (_tankID > 0 && _tankID < newIdTank);\r\n        require (tanks[_tankID].owner == msg.sender);\r\n        require (tanks[_tankID].selling == false); // Making sure that the tank is not on the auction already\r\n        require (_startPrice >= _finishPrice);\r\n        require (_startPrice > 0 && _finishPrice >= 0);\r\n        require (_duration > 0);\r\n        require (_startPrice == uint256(uint128(_startPrice))); // Just some magic stuff\r\n        require (_finishPrice == uint256(uint128(_finishPrice))); // Just some magic stuff\r\n        \r\n        auctions[newIdAuctionEntity] = AuctionEntity(_tankID, _startPrice, _finishPrice, now, _duration);\r\n        tanks[_tankID].selling = true;\r\n        tanks[_tankID].auctionEntity = newIdAuctionEntity++;\r\n        \r\n        EventAuction (msg.sender, _tankID, _startPrice, _finishPrice, _duration, now);\r\n    }\r\n    \r\n    //bidding function, people use this to buy tanks\r\n    function bid (uint32 _tankID) public payable {\r\n        require (_tankID > 0 && _tankID < newIdTank); // Checking if the tank exists\r\n        require (tanks[_tankID].selling == true); // Checking if this tanks is on the auction now\r\n        AuctionEntity memory currentAuction = auctions[tanks[_tankID].auctionEntity]; // The auction entity for this tank. Just to make the line below easier to read\r\n        uint256 currentPrice = currentAuction.startPrice-(((currentAuction.startPrice-currentAuction.finishPrice)/(currentAuction.duration))*(now-currentAuction.startTime));\r\n        // The line above calculates the current price using the formula StartPrice-(((StartPrice-FinishPrice)/Duration)*(CurrentTime-StartTime)\r\n        if (currentPrice < currentAuction.finishPrice){ // If the auction duration time has been expired\r\n            currentPrice = currentAuction.finishPrice;  // Setting the current price as finishPrice \r\n        }\r\n        require (currentPrice >= 0); // Who knows :)\r\n        require (msg.value >= currentPrice); // Checking if the buyer sent the amount of money which is more or equal the current price\r\n        \r\n        // All is fine, changing balances and changing tank's owner\r\n        uint256 marketFee = (currentPrice/100)*3; // Calculating 3% of the current price as a fee\r\n        balances[tanks[_tankID].owner] += currentPrice-marketFee; // Giving [current price]-[fee] amount to seller\r\n        balances[AuctionMaster] += marketFee; // Sending the fee amount to the contract creator's balance\r\n        balances[msg.sender] += msg.value-currentPrice; //Return the rest amount to buyer\r\n        tanks[_tankID].owner = msg.sender; // Changing the owner of the tank\r\n        tanks[_tankID].selling = false; // Change the tank status to \"not selling now\"\r\n        delete auctions[tanks[_tankID].auctionEntity]; // Deleting the auction entity from the storage for auctions -- we don't need it anymore\r\n        tanks[_tankID].auctionEntity = 0; // Not necessary, but deleting the ID of auction entity which was deleted in the operation above\r\n        \r\n        EventBid (_tankID);\r\n    }\r\n    \r\n    //cancel auction\r\n    function cancelAuction (uint32 _tankID) public {\r\n        require (_tankID > 0 && _tankID < newIdTank); // Checking if the tank exists\r\n        require (tanks[_tankID].selling == true); // Checking if this tanks is on the auction now\r\n        require (tanks[_tankID].owner == msg.sender); // Checking if sender owns this tank\r\n        tanks[_tankID].selling = false; // Change the tank status to \"not selling now\"\r\n        delete auctions[tanks[_tankID].auctionEntity]; // Deleting the auction entity from the storage for auctions -- we don't need it anymore\r\n        tanks[_tankID].auctionEntity = 0; // Not necessary, but deleting the ID of auction entity which was deleted in the operation above\r\n        \r\n        EventCancelAuction (_tankID);\r\n    }\r\n    \r\n    \r\n    function newTankProduct (string _name, uint32 _hull, uint32 _weapon, uint256 _price, uint256 _earning, uint256 _releaseTime) private {\r\n        tankProducts[newIdTankProduct++] = TankProduct(_name, _hull, _weapon, _price, _price, _earning, _releaseTime, 0);\r\n        \r\n        EventProduct (newIdTankProduct-1, _name, _hull, _weapon, _price, _earning, _releaseTime, now);\r\n    }\r\n    \r\n    function newTankHull (uint32 _armor, uint32 _speed, uint8 _league) private {\r\n        tankHulls[newIdTankHull++] = TankHull(_armor, _speed, _league);\r\n    }\r\n    \r\n    function newTankWeapon (uint32 _minDamage, uint32 _maxDamage, uint32 _attackSpeed, uint8 _league) private {\r\n        tankWeapons[newIdTankWeapon++] = TankWeapon(_minDamage, _maxDamage, _attackSpeed, _league);\r\n    }\r\n    \r\n    function exportTank (address _owner, uint32 _tankproductID) public {\r\n        require (canExport == true); // Can be called only if the process of exporting is allowed\r\n        require (msg.sender == ExportMaster); // This is what was missed before. All balances were returned.\r\n        tankProducts[_tankproductID].currentPrice += tankProducts[_tankproductID].earning;\r\n        tanks[newIdTank++] = TankEntity (_tankproductID, [0, 0, 0, 0], _owner, _owner, false, 0, 0, 0, ++tankProducts[_tankproductID].amountOfTanks);\r\n        \r\n        if (tanksBeforeTheNewTankType() == 0 && newIdTankProduct <= 121){\r\n            newTankType();\r\n        }\r\n        \r\n        EventBuyTank (_owner, _tankproductID, newIdTank-1);\r\n    }\r\n    \r\n    function exportTankResetEarning (uint32 _tankID) public {\r\n        // Because, before the exporting, we already payed all earnings\r\n        require (canExport == true); // Can be called only if the process of exporting is allowed\r\n        require (msg.sender == ExportMaster); // This is what was missed before. All balances were returned.\r\n        \r\n        tanks[_tankID].lastCashoutIndex = tankProducts[tanks[_tankID].productID].amountOfTanks; // Reseting the tank's earnings\r\n    \r\n    }\r\n    \r\n    function buyTank (uint32 _tankproductID) public payable {\r\n        require (canExport == false); // Can be called only if the process of exporting has been completed\r\n        require (tankProducts[_tankproductID].currentPrice > 0 && msg.value > 0); //value is more than 0, price is more than 0\r\n        require (msg.value >= tankProducts[_tankproductID].currentPrice); //value is higher than price\r\n        require (tankProducts[_tankproductID].releaseTime <= now); //checking if this tank was released.\r\n        // Basically, the releaseTime was implemented just to give a chance to get the new tank for as many players as possible.\r\n        // It prevents the using of bots.\r\n        \r\n        if (msg.value > tankProducts[_tankproductID].currentPrice){\r\n            // If player payed more, put the rest amount of money on his balance\r\n            balances[msg.sender] += msg.value-tankProducts[_tankproductID].currentPrice;\r\n        }\r\n        \r\n        tankProducts[_tankproductID].currentPrice += tankProducts[_tankproductID].earning;\r\n        \r\n        /*for (uint32 index = 1; index < newIdTank; index++){\r\n            if (tanks[index].productID == _tankproductID){\r\n                balances[tanks[index].earner] += tankProducts[_tankproductID].earning;\r\n                tanks[index].earned += tankProducts[_tankproductID].earning;\r\n            }\r\n        }*/\r\n        // This is why we decided to create the new contract - to avoid loops. Our suggestion to you: NEVER EVER USE LOOPS IN SMART-CONTRACTS\r\n        \r\n        if (tanksBeforeTheNewTankType() == 0 && newIdTankProduct <= 121){\r\n            newTankType();\r\n        }\r\n        \r\n        tanks[newIdTank++] = TankEntity (_tankproductID, [0, 0, 0, 0], msg.sender, msg.sender, false, 0, 0, 0, ++tankProducts[_tankproductID].amountOfTanks);\r\n\r\n        // After all owners of the same type of tank got their earnings, admins get the amount which remains and no one need it\r\n        // Basically, it is the start price of the tank.\r\n        balances[TankSellMaster] += tankProducts[_tankproductID].startPrice;\r\n        \r\n        EventBuyTank (msg.sender, _tankproductID, newIdTank-1);\r\n        return;\r\n    }\r\n    \r\n    // This is the tricky method which creates the new type tank.\r\n    function newTankType () private {\r\n        if (newIdTankProduct > 121){\r\n            return;\r\n        }\r\n        //creating new tank type!\r\n        if (createNewTankHull < newIdTankHull - 1 && createNewTankWeapon >= newIdTankWeapon - 1) {\r\n            createNewTankWeapon = 1;\r\n            createNewTankHull++;\r\n        } else {\r\n            createNewTankWeapon++;\r\n            if (createNewTankHull == createNewTankWeapon) {\r\n                createNewTankWeapon++;\r\n            }\r\n        }\r\n        newTankProduct (\"Tank\", uint32(createNewTankHull), uint32(createNewTankWeapon), 200000000000000000, 3000000000000000, now+(60*60));\r\n        return;\r\n    }\r\n    \r\n    // Our storage, keys are listed first, then mappings.\r\n    // Of course, instead of some mappings we could use arrays, but why not\r\n    \r\n    uint32 public newIdTank = 1; // The next ID for the new tank\r\n    uint32 public newIdTankProduct = 1; // The next ID for the new tank type\r\n    uint32 public newIdTankHull = 1; // The next ID for the new hull\r\n    uint32 public newIdTankWeapon = 1; // The new ID for the new weapon\r\n    uint32 public createNewTankHull = 1; // For newTankType()\r\n    uint32 public createNewTankWeapon = 0; // For newTankType()\r\n    uint256 public newIdAuctionEntity = 1; // The next ID for the new auction entity\r\n\r\n    mapping (uint32 => TankEntity) tanks; // The storage \r\n    mapping (uint32 => TankProduct) tankProducts;\r\n    mapping (uint32 => TankHull) tankHulls;\r\n    mapping (address => uint32[]) tankOwners;\r\n    mapping (uint32 => TankWeapon) tankWeapons;\r\n    mapping (uint256 => AuctionEntity) auctions;\r\n    mapping (address => uint) balances;\r\n\r\n    uint256 public constant upgradePrice = 50000000000000000; // The fee which the UgradeMaster earns for upgrading tanks\r\n\r\n    function getTankName (uint32 _ID) public constant returns (string){\r\n        return tankProducts[_ID].name;\r\n    }\r\n    \r\n    function getTankProduct (uint32 _ID) public constant returns (uint32[6]){\r\n        return [tankHulls[tankProducts[_ID].hull].armor, tankHulls[tankProducts[_ID].hull].speed, tankWeapons[tankProducts[_ID].weapon].minDamage, tankWeapons[tankProducts[_ID].weapon].maxDamage, tankWeapons[tankProducts[_ID].weapon].attackSpeed, uint32(tankProducts[_ID].releaseTime)];\r\n    }\r\n    \r\n    function getTankDetails (uint32 _ID) public constant returns (uint32[6]){\r\n        return [tanks[_ID].productID, uint32(tanks[_ID].upgrades[0]), uint32(tanks[_ID].upgrades[1]), uint32(tanks[_ID].upgrades[2]), uint32(tanks[_ID].upgrades[3]), uint32(tanks[_ID].exp)];\r\n    }\r\n    \r\n    function getTankOwner(uint32 _ID) public constant returns (address){\r\n        return tanks[_ID].owner;\r\n    }\r\n    \r\n    function getTankSell(uint32 _ID) public constant returns (bool){\r\n        return tanks[_ID].selling;\r\n    }\r\n    \r\n    function getTankTotalEarned(uint32 _ID) public constant returns (uint256){\r\n        return tanks[_ID].earned;\r\n    }\r\n    \r\n    function getTankAuctionEntity (uint32 _ID) public constant returns (uint256){\r\n        return tanks[_ID].auctionEntity;\r\n    }\r\n    \r\n    function getCurrentPrice (uint32 _ID) public constant returns (uint256){\r\n        return tankProducts[_ID].currentPrice;\r\n    }\r\n    \r\n    function getProductEarning (uint32 _ID) public constant returns (uint256){\r\n        return tankProducts[_ID].earning;\r\n    }\r\n    \r\n    function getTankEarning (uint32 _ID) public constant returns (uint256){\r\n        return tankProducts[tanks[_ID].productID].earning*(tankProducts[tanks[_ID].productID].amountOfTanks-tanks[_ID].lastCashoutIndex);\r\n    }\r\n    \r\n    function getCurrentPriceAuction (uint32 _ID) public constant returns (uint256){\r\n        require (getTankSell(_ID));\r\n        AuctionEntity memory currentAuction = auctions[tanks[_ID].auctionEntity]; // The auction entity for this tank. Just to make the line below easier to read\r\n        uint256 currentPrice = currentAuction.startPrice-(((currentAuction.startPrice-currentAuction.finishPrice)/(currentAuction.duration))*(now-currentAuction.startTime));\r\n        if (currentPrice < currentAuction.finishPrice){ // If the auction duration time has been expired\r\n            currentPrice = currentAuction.finishPrice;  // Setting the current price as finishPrice \r\n        }\r\n        return currentPrice;\r\n    }\r\n    \r\n    function getPlayerBalance(address _player) public constant returns (uint256){\r\n        return balances[_player];\r\n    }\r\n    \r\n    function getContractBalance() public constant returns (uint256){\r\n        return this.balance;\r\n    }\r\n    \r\n    function howManyTanks() public constant returns (uint32){\r\n        return newIdTankProduct;\r\n    }\r\n    \r\n    function tanksBeforeTheNewTankType() public constant returns (uint256){\r\n        return 1000+(((newIdTankProduct)+10)*((newIdTankProduct)+10)*(newIdTankProduct-11))-newIdTank;\r\n    }\r\n}\r\n\r\n/*\r\n    The previous contract addresses: \r\n    \r\n    Second address: 0xef8a560fa19f26982c27c78101545b8fe3018237\r\n    First address: 0xca5088449b96c225801ced8e9efdcae1e0c92a3d\r\n    \r\n    By the way, we are very thankful that you support us! \r\n    \r\n    EtherTanks.com\r\n    EthereTanks.com\r\n*/", "ABI": "[{\"constant\":false,\"inputs\":[],\"name\":\"FinishedExporting\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_ID\",\"type\":\"uint32\"}],\"name\":\"getCurrentPriceAuction\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_ID\",\"type\":\"uint32\"}],\"name\":\"getTankSell\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_ID\",\"type\":\"uint32\"}],\"name\":\"getTankName\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_tankID\",\"type\":\"uint32\"},{\"name\":\"_upgradeChoice\",\"type\":\"uint8\"}],\"name\":\"upgradeTank\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_tankID\",\"type\":\"uint32\"}],\"name\":\"cancelAuction\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"upgradePrice\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_hash\",\"type\":\"string\"}],\"name\":\"login\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_newMaster\",\"type\":\"address\"}],\"name\":\"ChangeAuctionMaster\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_ID\",\"type\":\"uint32\"}],\"name\":\"getCurrentPrice\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_ID\",\"type\":\"uint32\"}],\"name\":\"getTankDetails\",\"outputs\":[{\"name\":\"\",\"type\":\"uint32[6]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"newIdTankProduct\",\"outputs\":[{\"name\":\"\",\"type\":\"uint32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"UpgradeMaster\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"newIdTank\",\"outputs\":[{\"name\":\"\",\"type\":\"uint32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_tankID\",\"type\":\"uint32\"}],\"name\":\"bid\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_ID\",\"type\":\"uint32\"}],\"name\":\"getTankEarning\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_amount\",\"type\":\"uint256\"}],\"name\":\"cashOut\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_owner\",\"type\":\"address\"},{\"name\":\"_tankproductID\",\"type\":\"uint32\"}],\"name\":\"exportTank\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"canExport\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_tankproductID\",\"type\":\"uint32\"}],\"name\":\"buyTank\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getContractBalance\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_ID\",\"type\":\"uint32\"}],\"name\":\"getTankAuctionEntity\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_newMaster\",\"type\":\"address\"}],\"name\":\"ChangeTankSellMaster\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_tankID\",\"type\":\"uint32\"}],\"name\":\"cashOutTank\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_tankID\",\"type\":\"uint32\"},{\"name\":\"_receiver\",\"type\":\"address\"}],\"name\":\"_transfer\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_ID\",\"type\":\"uint32\"}],\"name\":\"getTankProduct\",\"outputs\":[{\"name\":\"\",\"type\":\"uint32[6]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_ID\",\"type\":\"uint32\"}],\"name\":\"getTankTotalEarned\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_newMaster\",\"type\":\"address\"}],\"name\":\"ChangeUpgradeMaster\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_ID\",\"type\":\"uint32\"}],\"name\":\"getTankOwner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"createNewTankWeapon\",\"outputs\":[{\"name\":\"\",\"type\":\"uint32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"AuctionMaster\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_tankID\",\"type\":\"uint32\"},{\"name\":\"_startPrice\",\"type\":\"uint256\"},{\"name\":\"_finishPrice\",\"type\":\"uint256\"},{\"name\":\"_duration\",\"type\":\"uint256\"}],\"name\":\"sellTank\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"newIdTankWeapon\",\"outputs\":[{\"name\":\"\",\"type\":\"uint32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"tanksBeforeTheNewTankType\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"howManyTanks\",\"outputs\":[{\"name\":\"\",\"type\":\"uint32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_ID\",\"type\":\"uint32\"}],\"name\":\"getProductEarning\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_tankID\",\"type\":\"uint32\"}],\"name\":\"exportTankResetEarning\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_tankID\",\"type\":\"uint32\"},{\"name\":\"_receiver\",\"type\":\"address\"},{\"name\":\"_ActionType\",\"type\":\"uint8\"}],\"name\":\"_transferAction\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"ExportMaster\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"TankSellMaster\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"createNewTankHull\",\"outputs\":[{\"name\":\"\",\"type\":\"uint32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_player\",\"type\":\"address\"}],\"name\":\"getPlayerBalance\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"newIdAuctionEntity\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"newIdTankHull\",\"outputs\":[{\"name\":\"\",\"type\":\"uint32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"player\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"amount\",\"type\":\"uint256\"}],\"name\":\"EventCashOut\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"player\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"hash\",\"type\":\"string\"}],\"name\":\"EventLogin\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"player\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"tankID\",\"type\":\"uint32\"},{\"indexed\":false,\"name\":\"upgradeChoice\",\"type\":\"uint8\"}],\"name\":\"EventUpgradeTank\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"player\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"receiver\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"tankID\",\"type\":\"uint32\"}],\"name\":\"EventTransfer\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"player\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"receiver\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"tankID\",\"type\":\"uint32\"},{\"indexed\":false,\"name\":\"ActionType\",\"type\":\"uint8\"}],\"name\":\"EventTransferAction\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"player\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"tankID\",\"type\":\"uint32\"},{\"indexed\":false,\"name\":\"startPrice\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"finishPrice\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"duration\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"currentTime\",\"type\":\"uint256\"}],\"name\":\"EventAuction\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"tankID\",\"type\":\"uint32\"}],\"name\":\"EventCancelAuction\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"tankID\",\"type\":\"uint32\"}],\"name\":\"EventBid\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"productID\",\"type\":\"uint32\"},{\"indexed\":false,\"name\":\"name\",\"type\":\"string\"},{\"indexed\":false,\"name\":\"hull\",\"type\":\"uint32\"},{\"indexed\":false,\"name\":\"weapon\",\"type\":\"uint32\"},{\"indexed\":false,\"name\":\"price\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"earning\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"releaseTime\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"currentTime\",\"type\":\"uint256\"}],\"name\":\"EventProduct\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"player\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"productID\",\"type\":\"uint32\"},{\"indexed\":false,\"name\":\"tankID\",\"type\":\"uint32\"}],\"name\":\"EventBuyTank\",\"type\":\"event\"}]", "ContractName": "EtherTanksCore", "CompilerVersion": "v0.4.20-nightly.2017.12.20+commit.efc198d5", "OptimizationUsed": "0", "Runs": "200", "ConstructorArguments": "", "Library": "", "SwarmSource": "bzzr://35533003cf5104730cd544cf0eed869d328606adf6397e48568d5460ffca5b4a"}]}